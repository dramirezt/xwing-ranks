<ion-view view-title="{{ tournament.name }}">
    <ion-nav-buttons side="right">
        <div class="buttons">
            <button class="button button-icon button-clear ion-more" ng-click="openPopover($event)" ng-show="currentUser._id === tournament.organizer"></button>
            <!--<button class="button button-icon button-clear ion-clipboard" ng-click="beginTestTournament()"></button>-->
        </div>
    </ion-nav-buttons>
    <ion-content class="has-footer">
        <div class="list card tournament-card">
            <div class="item item-divider item-icon-left">
                <i class="icon ion-information-circled icon-accesory"></i>
                Información
            </div>
            <!--<div class="item item-avatar item-icon-right" ng-click="tournamentInfo()">-->
            <div class="item item-avatar">
                <img ng-src="main/assets/images/yo@2x.png" style="width: 64px; height: 64px">
                <div class="row responsive-sm">
                  <div class="col col-50">
                    <i class="ion-calendar"></i>
                    <span ng-bind="tournament.startDate | date: 'dd/MM/yyyy'"></span><span ng-show="tournament.endDate">- <span ng-bind="tournament.endDate | date: 'dd/MM/yyyy'"></span></span>
                  </div>
                  <div class="col col-50">
                    <i class="ion-clock"></i> 09:00
                  </div>
                </div>
                <div class="row responsive-sm">
                  <div class="col col-50">
                    <i class="ion-ios-people"></i>
                    <span ng-bind="tournament.maxPlayers"></span> plazas
                  </div>
                  <div class="col col-50">
                    <i class="ion-ios-stopwatch"></i>
                    <span ng-show="tournament.rounds"><span ng-bind="tournament.rounds"></span> Rondas</span>
                    <span ng-show="tournament.top && tournament.rounds">+</span>
                    <span ng-show="tournament.top">Top <span ng-bind="tournament.top"></span></span>
                  </div>
                </div>
                <div class="row responsive-sm">
                  <div class="col">
                    <i class="ion-ios-location"></i>
                    <span ng-bind="tournament.city"></span> - <span ng-bind="tournament.address"></span>
                  </div>
                </div>
                <div class="row responsive-sm">
                  <div class="col">
                    Organiza:
                    <span ng-bind="tournament.organizername"></span>
                  </div>
                  <div class="col" ng-show="!tournament.finished">
                    <button class="button button-balanced" ng-show="!showInscriptionButton()" ng-click="joinTournament()" ng-disabled="inscriptionList.length >= tournament.maxPlayers">Inscribirme a este evento</button>
                    <button class="button button-assertive" ng-show="showInscriptionButton()" ng-click="deleteInscription(myCurrentInscription)">Cancelar inscripción</button>
                  </div>
                </div>
                <!--<i class="icon ion-chevron-right icon-accessory"></i>-->
            </div>
        </div>
        <div class="list card tournament-card">
            <div class="item item-divider item-icon-left">
                <i class="icon ion-person icon-accesory"></i>
                Ranking - <span ng-bind="inscriptionList.length"></span>/<span ng-bind="tournament.maxPlayers"></span> Jugadores
            </div>
            <ion-list show-delete="showDeleteInscriptions">
              <ion-item
                      class="item-remove-animate item-avatar item-icon-left item-icon-right"
                      type="item-text-wrap"
                      ng-repeat="inscription in inscriptionList | emptyToEnd: 'topPosition' | emptyToEnd: 'swissPosition'" ng-click="viewInscription(inscription)">
                  <ion-delete-button class="ion-close-circled" ng-click="deleteInscription(inscription)"></ion-delete-button>
                  <i class="icon xwing-miniatures-font xwing-miniatures-font-{{ inscription.faction.replace('Galactic ', '').replace('-', '') | lowercase }}"></i>
                  <h2 ng-bind="inscription.name"></h2>
                    <p ng-show="!inscription.drop">
                        <span ng-show="inscription.topPosition">
                            Top: <span ng-bind="inscription.topPosition"></span>
                        </span>
                        <span ng-show="inscription.swissPosition">
                            Swiss: <span ng-bind="inscription.swissPosition"></span>
                        </span>
                        <span ng-show="inscription.victoryPoints">
                            PV: <span ng-bind="inscription.victoryPoints"></span>,
                        </span>
                        <span ng-show="inscription.strengthOfSchedule">
                            SoS: <span ng-bind="inscription.strengthOfSchedule"></span>
                        </span>
                        <span class="badge badge-assertive" ng-show="inscription.firstRoundBye">Bye R1</span>
                    </p>
                    <p class="drop" ng-show="inscription.drop">Drop</p>
                    <i  style="color: #3398d0;" class="icon ion-chevron-right icon-accessory"></i>
              </ion-item>
            </ion-list>
        </div>
    </ion-content>
    <ion-footer-bar style="padding: 0px" ng-show="!tournament.finished">
        <div class="button-bar button-full">
          <a class="button button-balanced" ng-click="viewPairings()"
             ng-disabled="!inscriptionList.length">
              <span ng-show="!pairingList.length">COMENZAR TORNEO</span>
              <span ng-show="pairingList.length">EMPAREJAMIENTOS</span>
          </a>
        </div>
    </ion-footer-bar>
</ion-view>
